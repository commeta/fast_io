╔══════════════════════════════════════════════════════════════════╗
║      fast_io МНОГОПРОЦЕССНЫЙ СТРЕСС-ТЕСТ  v3.0                   ║
╚══════════════════════════════════════════════════════════════════╝

Процессов            : 12
Итераций на процесс  : 120
Рабочая директория   : /tmp/fast_io_mt_5638
PHP                  : 8.3.6


──────────────────────────────────────────────────────────────────────
  ФАЗА: PHASE 0 — Подготовка общего файла и карты консистентности
──────────────────────────────────────────────────────────────────────
Вставлено строк      : 1440 / 1440
Размер файла         : 737,280 байт
min/max/avg строк    : 512 / 512 / 512
flow_interruption    : 0
✅  PHASE 0 подготовка — PASS (0.043s)
  rchar:                              5.988 MB  (  139.27 MB/s)
  wchar:                              2.127 MB  (   49.46 MB/s)
  syscr:                               2581 ops (   60023 ops/s)
  syscw:                               4368 ops (  101581 ops/s)
  read_bytes:                             0 MB  (    0.00 MB/s)
  write_bytes:                         2.13 MB  (   49.53 MB/s)
  cancelled_write_bytes:                  0 MB  (    0.00 MB/s)

──────────────────────────────────────────────────────────────────────
  ФАЗА: PHASE 1 — Параллельное выполнение (все воркеры)
──────────────────────────────────────────────────────────────────────

──────────────────────────────────────────────────────────────────────
  ФАЗА: PHASE 2 — Консистентность данных (родитель читает после всех воркеров)
──────────────────────────────────────────────────────────────────────
Проверено ячеек : 1440
Повреждено      : 0
✅  PHASE 2 консистентность — PASS (0.0264s)
  rchar:                             17.557 MB  (  665.02 MB/s)
  wchar:                                  0 MB  (    0.00 MB/s)
  syscr:                               5482 ops (  207652 ops/s)
  syscw:                                  0 ops (       0 ops/s)
  read_bytes:                             0 MB  (    0.00 MB/s)
  write_bytes:                            0 MB  (    0.00 MB/s)
  cancelled_write_bytes:                  0 MB  (    0.00 MB/s)

──────────────────────────────────────────────────────────────────────
  ФАЗА: PHASE 3 — Финальный анализ файлов
──────────────────────────────────────────────────────────────────────
  line_count:               1440
  file_size:                737,280 B
  min_length:               512
  max_length:               512
  avg_length:               512.0
  flow_interruption:        0
  last_symbol (10=LF):      10
✅  PHASE 3 анализ — PASS (0.0005s)
  rchar:                              0.741 MB  ( 1482.99 MB/s)
  wchar:                                  0 MB  (    0.46 MB/s)
  syscr:                                 13 ops (   26000 ops/s)
  syscw:                                  7 ops (   14000 ops/s)
  read_bytes:                             0 MB  (    0.00 MB/s)
  write_bytes:                            0 MB  (    0.00 MB/s)
  cancelled_write_bytes:                  0 MB  (    0.00 MB/s)

──────────────────────────────────────────────────────────────────────
  ФАЗА: PHASE 4 — Сводная статистика по воркерам
──────────────────────────────────────────────────────────────────────

  SUB-TEST                W0   W1   W2   W3   W4   W5   W6   W7   W8   W9   W10  W11  PASS/TOTAL
  ──────────────────────────────────────────────────────────────────────────────────────────────
  select_line             ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  12/12
  select_array            ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  12/12
  update_line             ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  12/12
  update_array            ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  12/12
  search_line             ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  12/12
  search_array            ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  12/12
  get_keys                ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  12/12
  erase_line              ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  12/12
  push_search_data        ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  12/12
  callback_line           ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  12/12
  file_analize            ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  12/12
  find_matches_pcre2      ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  12/12
  replace_line            ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  12/12
  pop_line                ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  12/12
  replicate_file          ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  12/12
  defrag_data             ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  ✅  12/12

  ОШИБКИ ПО ВОРКЕРАМ:
  Ошибок не обнаружено ✅

──────────────────────────────────────────────────────────────────────
  ФАЗА: PHASE 5 — Суммарная статистика ввода/вывода (родительский процесс)
──────────────────────────────────────────────────────────────────────
  Общее время выполнения: 0.116 сек

  СТАТИСТИКА ЯДРА LINUX (/proc/PID/io):
  rchar:                             68.503 MB  (  590.54 MB/s)
  wchar:                              2.965 MB  (   25.56 MB/s)
  syscr:                              16413 ops (  141491 ops/s)
  syscw:                               6969 ops (   60078 ops/s)
  read_bytes:                             0 MB  (    0.00 MB/s)
  write_bytes:                        3.052 MB  (   26.31 MB/s)
  cancelled_write_bytes:              0.786 MB  (    6.78 MB/s)

  АГРЕГИРОВАННЫЙ IO ПО SUB-ТЕСТАМ (по всем воркерам):
  select_line:           rchar=   2.08 MB  wchar=   0.00 MB  syscr=   708  syscw=     0  avg_t= 0.00338s
  select_array:          rchar=   0.15 MB  wchar=   0.00 MB  syscr=    72  syscw=     0  avg_t= 0.00019s
  update_line:           rchar=   2.26 MB  wchar=   0.15 MB  syscr=   840  syscw=   300  avg_t= 0.00768s
  update_array:          rchar=   1.06 MB  wchar=   0.06 MB  syscr=   348  syscw=   120  avg_t= 0.00225s
  search_line:           rchar=   4.63 MB  wchar=   0.00 MB  syscr=   210  syscw=     0  avg_t= 0.00035s
  search_array:          rchar=   9.25 MB  wchar=   0.00 MB  syscr=   384  syscw=     0  avg_t= 0.00068s
  get_keys:              rchar=   0.86 MB  wchar=   0.00 MB  syscr=    60  syscw=     0  avg_t= 0.00019s
  erase_line:            rchar=   3.48 MB  wchar=   0.25 MB  syscr=   864  syscw=   480  avg_t= 0.00074s
  push_search_data:      rchar=   2.43 MB  wchar=   0.03 MB  syscr=  1353  syscw=   487  avg_t= 0.00105s
  callback_line:         rchar=   4.57 MB  wchar=   0.00 MB  syscr=   208  syscw=     0  avg_t= 0.00034s
  file_analize:          rchar=   8.90 MB  wchar=   0.00 MB  syscr=   434  syscw=     0  avg_t= 0.00070s
  find_matches_pcre2:    rchar=   0.00 MB  wchar=   0.00 MB  syscr=    36  syscw=     0  avg_t= 0.00003s
  replace_line:          rchar=   0.02 MB  wchar=   0.01 MB  syscr=   204  syscw=   144  avg_t= 0.00030s
  pop_line:              rchar=   3.94 MB  wchar=   0.18 MB  syscr=  1188  syscw=   360  avg_t= 0.00131s
  replicate_file:        rchar=   0.40 MB  wchar=   0.06 MB  syscr=   228  syscw=    72  avg_t= 0.00030s
  defrag_data:           rchar=   0.09 MB  wchar=   0.02 MB  syscr=   576  syscw=   348  avg_t= 0.00067s

──────────────────────────────────────────────────────────────────────
  ФАЗА: PHASE 6 — Пропускная способность (throughput)
──────────────────────────────────────────────────────────────────────
  Чтение символов (rchar):    590.541 MB/s  (всего     68.503 MB)
  Запись символов (wchar):     25.557 MB/s  (всего      2.965 MB)
  Физ.чтение (read_bytes):        0.000 MB/s  (всего      0.000 MB)
  Физ.запись (write_bytes):      26.306 MB/s  (всего      3.052 MB)
  Системных вызовов чтения (syscr):     141491  ops/s  (всего        16413)
  Системных вызовов записи (syscw):      60078  ops/s  (всего         6969)

══════════════════════════════════════════════════════════════════════
  ИТОГ
══════════════════════════════════════════════════════════════════════
  Время выполнения          : 0.116 сек
  Воркеры (всего/упало)     : 12 / 0
  Строк в файле             : 1440
  flow_interruption         : 0
  Проверено ячеек (consist.): 1440
  Повреждено ячеек          : 0
  Ошибок в воркерах         : 0

✅  check-engine-mt.php — УСПЕШНО ПРОЙДЕН
    Библиотека fast_io корректно работает в многопроцессной среде.
    Данные консистентны. Блокировки работают верно.

  Файлы теста: /tmp/fast_io_mt_5638 (будут удалены)
  Очистка завершена.
