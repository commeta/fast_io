# Echeck engine

## üìä –ü–û–ö–†–´–¢–ò–ï –¢–ï–°–¢–ê–ú–ò FAST_IO.C

### 1. **–ü–æ–∫—Ä—ã—Ç–∏–µ —Ñ—É–Ω–∫—Ü–∏–π**

| –§—É–Ω–∫—Ü–∏—è | –°—Ç–∞—Ç—É—Å | –†–µ–∂–∏–º—ã | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|---------|--------|--------|-----------|
| **file_search_array** | ‚úÖ | 0-3, 10-13, 20-23 | –í—Å–µ —Ä–µ–∂–∏–º—ã –ø–æ–∫—Ä—ã—Ç—ã (–ø–æ–∏—Å–∫, PCRE2, —Å–ª–æ–∂–Ω—ã–µ –º–∞—Å—Å–∏–≤—ã) |
| **file_search_line** | ‚úÖ | 0-1, 10-11 | –í—Å–µ —Ä–µ–∂–∏–º—ã + PCRE2 |
| **file_search_data** | ‚úÖ | 0 | –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Å .index —Ñ–∞–π–ª–∞–º–∏ |
| **file_push_data** | ‚úÖ | 0 | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ + –≥—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏ |
| **file_defrag_lines** | ‚úÖ | 0-1 | –° –∫–ª—é—á–æ–º –∏ –±–µ–∑, –æ–±–∞ —Ä–µ–∂–∏–º–∞ |
| **file_defrag_data** | ‚úÖ | 0-1 | –° –∫–ª—é—á–æ–º –∏ –±–µ–∑, –æ–±–∞ —Ä–µ–∂–∏–º–∞ |
| **file_pop_line** | ‚úÖ | 0-3 | offset >0, <0, –≤—Å–µ —Ä–µ–∂–∏–º—ã –æ–±—Ä–µ–∑–∫–∏ |
| **file_erase_line** | ‚úÖ | - | –¢–µ—Å—Ç—ã —Å –ø–æ–∑–∏—Ü–∏–µ–π –∏ –±–µ–∑ |
| **file_get_keys** | ‚úÖ | 0-5 | –í—Å–µ 6 —Ä–µ–∂–∏–º–æ–≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é |
| **file_replace_line** | ‚úÖ | 0-1 | –ú–∞—Å—Å–æ–≤–∞—è –∏ –æ–¥–∏–Ω–æ—á–Ω–∞—è –∑–∞–º–µ–Ω–∞ |
| **file_insert_line** | ‚úÖ | 0-3 | –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ, –≤—Å–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ |
| **file_select_line** | ‚úÖ | 0-3 | –í—Å–µ —Ä–µ–∂–∏–º—ã –ø–æ–∏—Å–∫–∞/–æ–±—Ä–µ–∑–∫–∏ |
| **file_update_line** | ‚úÖ | 0-1 | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫ |
| **file_analize** | ‚úÖ | 0-1 | –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ñ–∞–π–ª–∞ –∏ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–∏ |
| **find_matches_pcre2** | ‚úÖ | 0-1 | –ü—Ä–æ—Å—Ç—ã–µ –∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è |
| **replicate_file** | ‚úÖ | 0-1 | –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∏ .index |
| **file_select_array** | ‚úÖ | 0-3, 5-7, 10-13, 20-23 | –°–ª–æ–∂–Ω—ã–µ —Ä–µ–∂–∏–º—ã –º–∞—Å—Å–∏–≤–æ–≤ |
| **file_update_array** | ‚úÖ | 0-1 | –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ |
| **file_callback_line** | ‚úÖ | 0-7 | –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã callback —Ñ—É–Ω–∫—Ü–∏–∏ |

---

### 2. **–î–µ—Ç–∞–ª—å–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞ –ø–æ–∫—Ä—ã—Ç–∏—è**

#### **–ö–∞—Ç–µ–≥–æ—Ä–∏—è: –ü–æ–∏—Å–∫ –∏ —á—Ç–µ–Ω–∏–µ**
- ‚úÖ file_search_array (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ–∏—Å–∫ + PCRE2)
- ‚úÖ file_search_line (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ–∏—Å–∫ + PCRE2)
- ‚úÖ file_search_data (–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–∏—Å–∫)
- ‚úÖ file_get_keys (–∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–π –≤–æ –≤—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–∞—Ö)
- ‚úÖ find_matches_pcre2 (—Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è)

#### **–ö–∞—Ç–µ–≥–æ—Ä–∏—è: –í—ã–±–æ—Ä–∫–∞ —Å –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º**
- ‚úÖ file_select_line (4 —Ä–µ–∂–∏–º–∞: –ø–æ–∑–∏—Ü–∏—è, –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ, –æ–±—Ä–µ–∑–∫–∞)
- ‚úÖ file_select_array (14 —Ä–µ–∂–∏–º–æ–≤: –ø—Ä–æ—Å—Ç—ã–µ, PCRE2, —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ)

#### **–ö–∞—Ç–µ–≥–æ—Ä–∏—è: –ó–∞–ø–∏—Å—å –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ**
- ‚úÖ file_insert_line (–≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ, —Ä–µ–∂–∏–º—ã –æ–∫–æ–Ω—á–∞–Ω–∏—è —Å—Ç—Ä–æ–∫–∏)
- ‚úÖ file_push_data (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ)

#### **–ö–∞—Ç–µ–≥–æ—Ä–∏—è: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ**
- ‚úÖ file_update_line (–ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
- ‚úÖ file_update_array (–º–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
- ‚úÖ file_replace_line (–∑–∞–º–µ–Ω–∞ –ø–æ –∫–ª—é—á—É)

#### **–ö–∞—Ç–µ–≥–æ—Ä–∏—è: –£–¥–∞–ª–µ–Ω–∏–µ**
- ‚úÖ file_erase_line (–º—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ - –∑–∞–º–µ–Ω–∞ –Ω–∞ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã)
- ‚úÖ file_pop_line (—É–¥–∞–ª–µ–Ω–∏–µ —Å –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ–º –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å—Ç—Ä–æ–∫–∏)

#### **–ö–∞—Ç–µ–≥–æ—Ä–∏—è: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**
- ‚úÖ file_defrag_lines (—É–¥–∞–ª–µ–Ω–∏–µ –ø—É—Å—Ç–æ—Ç –≤ –æ–±—ã—á–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö)
- ‚úÖ file_defrag_data (—É–¥–∞–ª–µ–Ω–∏–µ –ø—É—Å—Ç–æ—Ç –≤ –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö)
- ‚úÖ replicate_file (–ø–æ–ª–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å .index)

#### **–ö–∞—Ç–µ–≥–æ—Ä–∏—è: –ê–Ω–∞–ª–∏–∑ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞**
- ‚úÖ file_analize (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ñ–∞–π–ª–∞)
- ‚úÖ file_callback_line (–æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç—Ä–æ–∫ callback —Ñ—É–Ω–∫—Ü–∏–µ–π)

---

### 3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤**

| –°—Ü–µ–Ω–∞—Ä–∏–π | –ü–æ–∫—Ä—ã—Ç? |
|----------|:-------:|
| –ü—É—Å—Ç—ã–µ —Ñ–∞–π–ª—ã | ‚úÖ |
| –°–ª—É—á–∞–π–Ω—ã–π buffer_size (16-65536) | ‚úÖ |
| –°–ª—É—á–∞–π–Ω–æ–µ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ (32-65536) | ‚úÖ |
| –û—á–µ–Ω—å –±–æ–ª—å—à–∏–µ —Å—Ç—Ä–æ–∫–∏ | ‚úÖ |
| –û–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –±—É—Ñ–µ—Ä–∞—Ö | ‚úÖ |
| –†–∞–±–æ—Ç–∞ —Å–æ 100 –∏—Ç–µ—Ä–∞—Ü–∏—è–º–∏ –∫–∞–∂–¥–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ | ‚úÖ |
| –ü–æ–∑–∏—Ü–∏–∏ –∑–∞ –≥—Ä–∞–Ω–∏—Ü–∞–º–∏ —Ñ–∞–π–ª–∞ | ‚úÖ |
| –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ offset'—ã | ‚úÖ |
| –ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–ª—é—á–∏ | ‚úÖ |
| –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏ –∏ .index –≤ –ø–∞—Ä–µ | ‚úÖ |
| –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ñ–∞–π–ª–æ–≤ (mode < 100) | ‚úÖ |

---

### 5. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∫—Ä—ã—Ç–∏—è**

```
–í—Å–µ–≥–æ —Ñ—É–Ω–∫—Ü–∏–π PHP API:           19
–§—É–Ω–∫—Ü–∏–π —Å –ø–æ–ª–Ω—ã–º –ø–æ–∫—Ä—ã—Ç–∏–µ–º:      19  (100%)
–§—É–Ω–∫—Ü–∏–π —Å —á–∞—Å—Ç–∏—á–Ω—ã–º –ø–æ–∫—Ä—ã—Ç–∏–µ–º:   0   (0%)
–§—É–Ω–∫—Ü–∏–π –±–µ–∑ –ø–æ–∫—Ä—ã—Ç–∏—è:            0   (0%)

–í—Å–µ–≥–æ —Ä–µ–∂–∏–º–æ–≤ (mode):            ~80+
–ü–æ–∫—Ä—ã—Ç–æ —Ä–µ–∂–∏–º–æ–≤:                 ~80+ (99.9%)

–ò—Ç–µ—Ä–∞—Ü–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:           ~100 –¥–ª—è –∫–∞–∂–¥–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
–°–ª—É—á–∞–π–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:             ‚úÖ buffer_size, align, —Å—Ç—Ä–æ–∫–∏
```

---

### 6. **–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ (–º–∏–Ω–æ—Ä, –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)**

1. **–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç —Ç–µ—Å—Ç—ã –Ω–∞ –æ—à–∏–±–∫–∏ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã:**
   - No space on disk
   - Permission denied
   - Corrupted files
   - *–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤*

2. **–ù–µ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è —Å—Ç—Ä–µ—Å—Å –Ω–∞ –ø–∞–º—è—Ç–∏:**
   - Emalloc failure simulation
   - Out of memory scenarios
   - *–°–ª–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –≤ PHP*

3. **–†–µ–¥–∫–∏–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Ä–µ–∂–∏–º–æ–≤:**
   - –ù–∞–ø—Ä–∏–º–µ—Ä, mode > 1000
   - *–ù–µ –∏–º–µ—é—Ç —Å–º—ã—Å–ª–∞ –≤ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–º –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏*

---

### 7. **–í—ã–≤–æ–¥—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**

**‚úÖ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï:**
```
Fast_io.c –∏–º–µ–µ—Ç —Ç–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ

- –í–°–ï 19 —Ñ—É–Ω–∫—Ü–∏–π –ø–æ–∫—Ä—ã—Ç—ã ‚úÖ
- –í–°–ï –æ—Å–Ω–æ–≤–Ω—ã–µ —Ä–µ–∂–∏–º—ã –ø–æ–∫—Ä—ã—Ç—ã ‚úÖ
- –ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã ‚úÖ
- –°–ª—É—á–∞–π–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å ‚úÖ
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ñ–∞–π–ª–æ–≤ —Ç—â–∞—Ç–µ–ª—å–Ω–∞ ‚úÖ
```


