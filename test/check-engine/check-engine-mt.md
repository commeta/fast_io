# üöÄ –ú–Ω–æ–≥–æ-–ø—Ä–æ—Ü–µ—Å—Å–Ω—ã–π —Å—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç (check-engine-mt.php)

**check-engine-mt.php** ‚Äî —ç—Ç–æ **–ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –º–Ω–æ–≥–æ–ø—Ä–æ—Ü–µ—Å—Å–Ω—ã–π —Å—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç** –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ fast_io, –ø—Ä–æ–≤–µ—Ä—è—é—â–∏–π –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã **–≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –≤ 12 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é).

## –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–µ—Å—Ç

- ‚úÖ `file_insert_line` / `file_select_line` / `file_select_array`
- ‚úÖ `file_update_line` / `file_update_array`
- ‚úÖ `file_search_line` / `file_search_array` / `file_get_keys`
- ‚úÖ `file_erase_line` / `file_replace_line`
- ‚úÖ `file_push_data` / `file_search_data` / `file_defrag_data`
- ‚úÖ `file_pop_line` (LIFO-—Å—Ç–µ–∫)
- ‚úÖ `file_callback_line`
- ‚úÖ `file_analize`, `replicate_file`, `find_matches_pcre2`
- ‚úÖ **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö** –º–µ–∂–¥—É –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ (–∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≥–æ–Ω–æ–∫ –∏ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–π)
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —è–¥—Ä–∞ Linux (`/proc/<PID>/io`) ‚Äî —Ä–µ–∞–ª—å–Ω–∞—è –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∏ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –≤—ã–∑–æ–≤—ã

–¢–µ—Å—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ 512 –±–∞–π—Ç**, —Å–æ–∑–¥–∞—ë—Ç 1440 —Å—Ç—Ä–æ–∫ (12 –≤–æ—Ä–∫–µ—Ä–æ–≤ √ó 120 –∏—Ç–µ—Ä–∞—Ü–∏–π), —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –¥–∏–∞–ø–∞–∑–æ–Ω—ã —Å–º–µ—â–µ–Ω–∏–π –±–µ–∑ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π –∏ –ø–æ—Å–ª–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞–∂–¥—É—é —è—á–µ–π–∫—É –Ω–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å.

## –ó–∞–ø—É—Å–∫

```bash
# –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∑–∞–ø—É—Å–∫ (12 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ √ó 120 –∏—Ç–µ—Ä–∞—Ü–∏–π)
php check-engine-mt.php

# –ò–ª–∏ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
php check-engine-mt.php 16 200     # 16 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ √ó 200 –∏—Ç–µ—Ä–∞—Ü–∏–π
```

## –ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è (0.125 —Å–µ–∫)

```text
‚úÖ PHASE 0 –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ ‚Äî PASS
‚úÖ PHASE 2 –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å ‚Äî PASS (1440/1440, 0 –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–æ)
‚úÖ PHASE 3 –∞–Ω–∞–ª–∏–∑ ‚Äî PASS
‚úÖ PHASE 4 —Å–≤–æ–¥–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ ‚Äî –≤—Å–µ 16 —Å—É–±-—Ç–µ—Å—Ç–æ–≤ 12/12 ‚úÖ

–û–±—â–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 0.125 —Å–µ–∫
–í–æ—Ä–∫–µ—Ä—ã (–≤—Å–µ–≥–æ/—É–ø–∞–ª–æ): 12 / 0
–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —è—á–µ–µ–∫: 1440
–ü–æ–≤—Ä–µ–∂–¥–µ–Ω–æ —è—á–µ–µ–∫: 0
–û—à–∏–±–æ–∫ –≤ –≤–æ—Ä–∫–µ—Ä–∞—Ö: 0

‚úÖ check-engine-mt.php ‚Äî –£–°–ü–ï–®–ù–û –ü–†–û–ô–î–ï–ù
    –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ fast_io –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –º–Ω–æ–≥–æ–ø—Ä–æ—Ü–µ—Å—Å–Ω–æ–π —Å—Ä–µ–¥–µ.
    –î–∞–Ω–Ω—ã–µ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã. –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –≤–µ—Ä–Ω–æ.
```

**–ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å (–ø—Ä–∏–º–µ—Ä –Ω–∞ Ryzen 9 / NVMe):**

- –ß—Ç–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–æ–≤ (rchar): **543 MB/s**
- –ó–∞–ø–∏—Å—å —Å–∏–º–≤–æ–ª–æ–≤ (wchar): **23.7 MB/s**
- –°–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ —á—Ç–µ–Ω–∏—è: **131 480 ops/s**

## –ö–æ–≥–¥–∞ —Ç–µ—Å—Ç –ø–∞–¥–∞–µ—Ç

- –õ—é–±–æ–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö ‚Üí `‚ùå –ü–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã—Ö —è—á–µ–µ–∫: N`
- –ü–∞–¥–µ–Ω–∏–µ –≤–æ—Ä–∫–µ—Ä–∞ ‚Üí `–í–æ—Ä–∫–µ—Ä—ã (–≤—Å–µ–≥–æ/—É–ø–∞–ª–æ): 12 / 1`
- `flow_interruption > 0` ‚Äî –æ–±—Ä—ã–≤ –∑–∞–ø–∏—Å–µ–π

–ï—Å–ª–∏ —Ç–µ—Å—Ç –ø—Ä–æ—à—ë–ª –∑–µ–ª—ë–Ω—ã–º ‚Äî –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ **–≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–∞** –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –º–Ω–æ–≥–æ–ø—Ä–æ—Ü–µ—Å—Å–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö (Nginx + PHP-FPM, Swoole, RoadRunner –∏ —Ç.–¥.).

---

**–§–∞–π–ª —Ç–µ—Å—Ç–∞:** `test/check-engine-mt.php` (–ª–µ–∂–∏—Ç –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏)
**–û–¥–Ω–æ–ø–æ—Ç–æ—á–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç:** `test/check-engine.php` (–¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏)

---
