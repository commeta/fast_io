# Описание функции insert_key_value

Функция insert_key_value предназначена для добавления строк с определённым выравниванием в файл. Это может быть полезно для создания структурированных текстовых баз данных или лог-файлов, где каждая запись должна начинаться с новой строки и иметь фиксированную длину. Функция реализована на языке C и доступна в PHP через специальное расширение.

## Параметры

Функция принимает три аргумента:

- filename (string): Путь к файлу, в который будет производиться запись.
- index_key (string): Строка, которую необходимо записать в файл.
- index_align (int): Число, определяющее выравнивание строки в файле (длину строки в символах).

## Возвращаемые значения

Функция возвращает номер строки, в которую была добавлена запись, начиная с 0. В случае возникновения ошибки возвращается отрицательное число, указывающее на тип ошибки:

- -1: Не удалось открыть файл.
- -2: Не удалось заблокировать файл для записи.
- -3: Не удалось получить размер файла.
- -4: Ошибка записи в файл.

## Пример использования
```
<?php
$filename = "/path/to/your/file.txt";
$index_key = "exampleKey";
$index_align = 100; // Допустим, мы хотим, чтобы каждая строка занимала 100 символов

$result = insert_key_value($filename, $index_key, $index_align);

if ($result >= 0) {
    echo "Запись успешно добавлена. Номер строки: $result";
} else {
    echo "Произошла ошибка при добавлении записи. Код ошибки: $result";
}
?>
```

Еще [пример](/test/test.php): стресс тест.

В этом примере мы пытаемся добавить строку "exampleKey" в файл file.txt, при этом каждая запись должна занимать ровно 100 символов. Если операция проходит успешно, функция вернёт номер строки, в которую была добавлена запись. В случае ошибки будет возвращён соответствующий код.

### Формат файла

Файл будет содержать данные в формате ключ-значение, разделённые пробелом, каждая пара на новой строке. Например:

```
index_0 data_insert_key_value_0
index_1 data_insert_key_value_1
index_2 data_insert_key_value_2
```


## Примечания

- Файл автоматически блокируется на время записи для предотвращения одновременного доступа.
- Если файл не существует, он будет создан.
- Длина index_key может быть меньше index_align. В этом случае оставшаяся часть строки будет заполнена пробелами. Если index_key длиннее index_align, строка будет обрезана до нужной длины.


## Бюджет ресурсов

- CPU Bound - Подготовка строки к записи с учетом выравнивания.
- IO Bound - Запись строки в конец файла.

Низкое потребление, запись строки в конец файла.
