# Описание функции detect_align_size

Функция detect_align_size написана на языке C и предназначена для использования в PHP через специализированное расширение Fast_IO. 
Функция анализирует текстовый файл и определяет максимальную длину строки в этом файле. 
Это может быть особенно полезно для форматирования вывода или оптимизации обработки текстовых данных.


### Описание

Функция открывает указанный текстовый файл, последовательно читает его содержимое и вычисляет длину каждой строки. В результате работы функция возвращает длину самой длинной найденной строки. В случае возникновения ошибки при открытии файла или его блокировке функция возвращает FALSE и генерирует предупреждение.

### Синтаксис

int detect_align_size(string $filename)


#### Параметры

- **filename**: Путь к текстовому файлу, который необходимо проанализировать.

### Возвращаемые значения

Возвращает максимальную длину строки в файле как целое число. В случае ошибки возвращает FALSE.

### Ошибки/Исключения

Генерирует предупреждение, если файл, указанный в параметре filename, не удаётся открыть или заблокировать для чтения.

### Примеры

#### Пример #1 Базовое использование detect_align_size
```
<?php
$filename = "example.txt";
$maxLineLength = detect_align_size($filename);

if ($maxLineLength !== FALSE) {
    echo "Самая длинная строка содержит $maxLineLength символов.";
} else {
    echo "Произошла ошибка.";
}
?>
```

#### Пример #2 Установка размера буфера по максимальному размеру строки
```
<?php
$align_size = detect_align_size(__DIR__ . '/fast_io.dat');
if($align_size && (int) ini_get('fast_io.buffer_size') < $align_size + 1) ini_set('fast_io.buffer_size', $align_size + 1);
?>
```


### Примечания

- Функция подсчитывает количество символов в каждой строке, включая пробелы, но исключая символ перевода строки.
- Если последняя строка файла не заканчивается символом перевода строки, её длина всё равно корректно учитывается.
- Функция использует эксклюзивную блокировку файла во время обработки, чтобы предотвратить одновременные изменения.


## Стоимость вызова

- CPU Bound - Заполнение буфера и полнотекстовый поиск в начале каждой строки.
- IO Bound - Посекторное чтение файла в буфер.

Среднее потребление, чтение всего файла.

