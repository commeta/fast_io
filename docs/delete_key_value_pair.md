## Описание

Функция delete_key_value_pair написана на языке C и предназначена для использования в PHP через специализированное расширение Fast_IO. 

Функция delete_key_value_pair удаляет пару ключ-значение из файла данных. 
Во время удаления устанавливается портируемая блокировка на файл, чтобы другие экземпляры ожидали освобождения файла. 
Данные копируются порциями во временный файл с последующим переименованием, что позволяет избежать загрузки всего файла в память.


## Синтаксис

long delete_key_value_pair(string $filename, string $index_key)


### Параметры

- **filename** - Путь к текстовому файлу данных, из которого будет удалена пара ключ-значение.
- **index_key** - Ключ, ассоциированный с удаляемой парой ключ-значение.

### Возвращаемые значения

- Возвращает 1, если удаление прошло успешно.
- Возвращает -1, если не удалось открыть оригинальный файл.
- Возвращает -2, если не удалось создать или открыть временный файл.
- Возвращает -3, если не удалось установить блокировку на один из файлов.
- Возвращает -4, если возникла ошибка при работе с файлами.

## Пример использования

Для использования этой функции необходимо, чтобы ваше PHP-окружение поддерживало соответствующее расширение.
```
<?php
$filename = 'path/to/datafile';
$key = 'unique_key';

$result = delete_key_value_pair($filename, $key);

if ($result == 1) {
    echo "Пара ключ-значение успешно удалена";
} else {
    echo "Ошибка при удалении: код ошибки " . $result;
}
?>
```

### Особенности работы

Функция работает с текстовыми файлами, где каждая строка представляет собой пару ключ-значение, разделенные пробелом. При удалении функция создает временный файл, в который копируются все строки, не соответствующие указанному ключу. После завершения чтения и копирования, временный файл заменяет оригинальный, тем самым удаляя указанную пару ключ-значение.

### Ограничения

- Файл должен быть доступен для чтения и записи.
- Для корректной работы функции необходимо, чтобы размер буфера был достаточным для чтения строк файла.
- Функция предполагает, что пары ключ-значение разделены простым пробелом и что ключи уникальны в рамках файла.

## Заключение

Функция delete_key_value_pair предоставляет эффективный способ удаления данных из текстовых файлов в PHP приложениях. Благодаря использованию временного файла и порционного чтения, функция обеспечивает высокую производительность и минимизацию использования памяти даже для больших файлов данных.
