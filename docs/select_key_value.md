# Описание функции select_key_value

Функция select_key_value предназначена для выборки строки по указанному номеру строки и выравниванию из текстового файла. Эта функция может быть особенно полезна при работе с файлами, структурированными в виде таблиц, где каждая запись имеет фиксированную длину. Функция реализована на языке C и доступна в PHP через специальное расширение.





## Синтаксис

string select_key_value(string $filename, int $index_row, int $index_align[, int mode = 0] )


### Параметры

- **filename** - Путь к файлу, в котором будет производиться поиск.
- **index_row** - Номер строки (либо смещение в файле), которую необходимо прочитать. Нумерация начинается с 0.
- **index_align** - Размер выравнивания строки в файле (длина строки в символах).
- **mode** (int, optional) - Режим поиска.


#### Режимы поиска
- 0: Поиск строки по номеру с учетом выравнивания.
- 1: Поиск строки по смещению без выравнивания

## Возвращаемые значения

В случае успешного выполнения функция возвращает строку, прочитанную из файла. Если в процессе выполнения возникли ошибки (например, файл не удалось открыть или заблокировать для чтения), функция возвращает FALSE.

В режиме mode=1 можно указать любой размер строки index_align, строка будет обрезана по символу перевода строки. Если символ перевода строки не будет найден, функция вернет подстроку.

Строка возвращается без конечных пробелов и символа перевода строки.


## Пример использования
```
<?php
$filename = "/path/to/your/file.txt";
$index_row = 2; // Номер строки, которую хотим прочитать
$index_align = 100; // Длина каждой строки в файле

$value = select_key_value($filename, $index_row, $index_align);

if ($value !== FALSE) {
    echo "Прочитанная строка: $value";
} else {
    echo "Произошла ошибка при чтении файла.";
}
?>
```

В этом примере мы пытаемся прочитать строку под номером 2 из файла file.txt, где каждая запись имеет длину 100 символов. Если операция проходит успешно, выводится прочитанная строка. В случае ошибки выводится сообщение о возникшей проблеме.

Еще [пример](/test/readme.md): Тесты.

## Примечания

- Файл автоматически блокируется на время чтения для предотвращения одновременного доступа.
- Для работы функции необходимо, чтобы файл существовал и был доступен для чтения.
- Строка возвращается без конечных пробелов, что удобно при работе с текстовыми данными.

Эта функция является частью специализированного расширения PHP и требует его предварительной установки и активации.


## Стоимость вызова

- CPU Bound - Обрезка пробелов справа и символа перевода строки.
- IO Bound - Посекторное чтение файла по указанному смещению и размеру.

Очень низкое потребление, посекторное чтение отрезка файла.
